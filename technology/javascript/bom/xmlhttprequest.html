<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.67" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://codemake.fun/technology/javascript/bom/xmlhttprequest.html"><meta property="og:site_name" content="Yang's Blog"><meta property="og:title" content="XMLHttpRequest å¯¹è±¡"><meta property="og:description" content="ç®€ä»‹ æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´ï¼Œé‡‡ç”¨ HTTP åè®®é€šä¿¡ã€‚ç”¨æˆ·åœ¨æµè§ˆå™¨åœ°å€æ é”®å…¥ä¸€ä¸ªç½‘å€ï¼Œæˆ–è€…é€šè¿‡ç½‘é¡µè¡¨å•å‘æœåŠ¡å™¨æäº¤å†…å®¹ï¼Œè¿™æ—¶æµè§ˆå™¨å°±ä¼šå‘æœåŠ¡å™¨å‘å‡º HTTP è¯·æ±‚ã€‚ 1999å¹´ï¼Œå¾®è½¯å…¬å¸å‘å¸ƒ IE æµè§ˆå™¨5.0ç‰ˆï¼Œç¬¬ä¸€æ¬¡å¼•å…¥æ–°åŠŸèƒ½ï¼šå…è®¸ JavaScript è„šæœ¬å‘æœåŠ¡å™¨å‘èµ· HTTP è¯·æ±‚ã€‚è¿™ä¸ªåŠŸèƒ½å½“æ—¶å¹¶æ²¡æœ‰å¼•èµ·æ³¨æ„ï¼Œç›´åˆ°2004å¹´ Gmail å‘å¸ƒå’Œ2005å¹´ Google Map å‘å¸ƒï¼Œæ‰å¼•èµ·å¹¿æ³›é‡è§†ã€‚2005å¹´2æœˆï¼ŒAJAX è¿™ä¸ªè¯ç¬¬ä¸€æ¬¡æ­£å¼æå‡ºï¼Œå®ƒæ˜¯ Asynchronous JavaScript and XML çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡ JavaScript çš„å¼‚æ­¥é€šä¿¡ï¼Œä»æœåŠ¡å™¨è·å– XML æ–‡æ¡£ä»ä¸­æå–æ•°æ®ï¼Œå†æ›´æ–°å½“å‰ç½‘é¡µçš„å¯¹åº”éƒ¨åˆ†ï¼Œè€Œä¸ç”¨åˆ·æ–°æ•´ä¸ªç½‘é¡µã€‚åæ¥ï¼ŒAJAX è¿™ä¸ªè¯å°±æˆä¸º JavaScript è„šæœ¬å‘èµ· HTTP é€šä¿¡çš„ä»£åè¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ç”¨è„šæœ¬å‘èµ·é€šä¿¡ï¼Œå°±å¯ä»¥å«åš AJAX é€šä¿¡ã€‚W3C ä¹Ÿåœ¨2006å¹´å‘å¸ƒäº†å®ƒçš„å›½é™…æ ‡å‡†ã€‚"><meta property="og:type" content="website"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-01-11T09:12:15.000Z"><meta property="article:author" content="Yang"><meta property="article:tag" content="javascript"><meta property="article:modified_time" content="2023-01-11T09:12:15.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"XMLHttpRequest å¯¹è±¡","description":"ç®€ä»‹ æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´ï¼Œé‡‡ç”¨ HTTP åè®®é€šä¿¡ã€‚ç”¨æˆ·åœ¨æµè§ˆå™¨åœ°å€æ é”®å…¥ä¸€ä¸ªç½‘å€ï¼Œæˆ–è€…é€šè¿‡ç½‘é¡µè¡¨å•å‘æœåŠ¡å™¨æäº¤å†…å®¹ï¼Œè¿™æ—¶æµè§ˆå™¨å°±ä¼šå‘æœåŠ¡å™¨å‘å‡º HTTP è¯·æ±‚ã€‚ 1999å¹´ï¼Œå¾®è½¯å…¬å¸å‘å¸ƒ IE æµè§ˆå™¨5.0ç‰ˆï¼Œç¬¬ä¸€æ¬¡å¼•å…¥æ–°åŠŸèƒ½ï¼šå…è®¸ JavaScript è„šæœ¬å‘æœåŠ¡å™¨å‘èµ· HTTP è¯·æ±‚ã€‚è¿™ä¸ªåŠŸèƒ½å½“æ—¶å¹¶æ²¡æœ‰å¼•èµ·æ³¨æ„ï¼Œç›´åˆ°2004å¹´ Gmail å‘å¸ƒå’Œ2005å¹´ Google Map å‘å¸ƒï¼Œæ‰å¼•èµ·å¹¿æ³›é‡è§†ã€‚2005å¹´2æœˆï¼ŒAJAX è¿™ä¸ªè¯ç¬¬ä¸€æ¬¡æ­£å¼æå‡ºï¼Œå®ƒæ˜¯ Asynchronous JavaScript and XML çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡ JavaScript çš„å¼‚æ­¥é€šä¿¡ï¼Œä»æœåŠ¡å™¨è·å– XML æ–‡æ¡£ä»ä¸­æå–æ•°æ®ï¼Œå†æ›´æ–°å½“å‰ç½‘é¡µçš„å¯¹åº”éƒ¨åˆ†ï¼Œè€Œä¸ç”¨åˆ·æ–°æ•´ä¸ªç½‘é¡µã€‚åæ¥ï¼ŒAJAX è¿™ä¸ªè¯å°±æˆä¸º JavaScript è„šæœ¬å‘èµ· HTTP é€šä¿¡çš„ä»£åè¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ç”¨è„šæœ¬å‘èµ·é€šä¿¡ï¼Œå°±å¯ä»¥å«åš AJAX é€šä¿¡ã€‚W3C ä¹Ÿåœ¨2006å¹´å‘å¸ƒäº†å®ƒçš„å›½é™…æ ‡å‡†ã€‚"}</script><link rel="icon" href="/favicon.ico"><meta keywords="å­™æŒ¯æ´‹,sunzhenyang,Ethan,Yang,Blog,ä¸ªäººåšå®¢"><meta description="å­™æŒ¯æ´‹,sunzhenyang,Ethan,Yang,Blog,ä¸ªäººåšå®¢"><meta author="å­™æŒ¯æ´‹"><script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?81e35d10111c9c98f8ba21abfe2b823a";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#096dd9"><link rel="apple-touch-icon" href="/assets/icon/apple-touch-icon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="white"><link rel="mask-icon" href="/assets/icon/apple-touch-icon.png" color="#096dd9"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#096dd9"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><link rel="alternate" type="application/atom+xml" href="https://codemake.fun/atom.xml" title="Yang's Blog Atom Feed"><link rel="alternate" type="application/json" href="https://codemake.fun/feed.json" title="Yang's Blog JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://codemake.fun/rss.xml" title="Yang's Blog RSS Feed"><title>XMLHttpRequest å¯¹è±¡ | Yang's Blog</title><meta name="description" content="ç®€ä»‹ æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´ï¼Œé‡‡ç”¨ HTTP åè®®é€šä¿¡ã€‚ç”¨æˆ·åœ¨æµè§ˆå™¨åœ°å€æ é”®å…¥ä¸€ä¸ªç½‘å€ï¼Œæˆ–è€…é€šè¿‡ç½‘é¡µè¡¨å•å‘æœåŠ¡å™¨æäº¤å†…å®¹ï¼Œè¿™æ—¶æµè§ˆå™¨å°±ä¼šå‘æœåŠ¡å™¨å‘å‡º HTTP è¯·æ±‚ã€‚ 1999å¹´ï¼Œå¾®è½¯å…¬å¸å‘å¸ƒ IE æµè§ˆå™¨5.0ç‰ˆï¼Œç¬¬ä¸€æ¬¡å¼•å…¥æ–°åŠŸèƒ½ï¼šå…è®¸ JavaScript è„šæœ¬å‘æœåŠ¡å™¨å‘èµ· HTTP è¯·æ±‚ã€‚è¿™ä¸ªåŠŸèƒ½å½“æ—¶å¹¶æ²¡æœ‰å¼•èµ·æ³¨æ„ï¼Œç›´åˆ°2004å¹´ Gmail å‘å¸ƒå’Œ2005å¹´ Google Map å‘å¸ƒï¼Œæ‰å¼•èµ·å¹¿æ³›é‡è§†ã€‚2005å¹´2æœˆï¼ŒAJAX è¿™ä¸ªè¯ç¬¬ä¸€æ¬¡æ­£å¼æå‡ºï¼Œå®ƒæ˜¯ Asynchronous JavaScript and XML çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡ JavaScript çš„å¼‚æ­¥é€šä¿¡ï¼Œä»æœåŠ¡å™¨è·å– XML æ–‡æ¡£ä»ä¸­æå–æ•°æ®ï¼Œå†æ›´æ–°å½“å‰ç½‘é¡µçš„å¯¹åº”éƒ¨åˆ†ï¼Œè€Œä¸ç”¨åˆ·æ–°æ•´ä¸ªç½‘é¡µã€‚åæ¥ï¼ŒAJAX è¿™ä¸ªè¯å°±æˆä¸º JavaScript è„šæœ¬å‘èµ· HTTP é€šä¿¡çš„ä»£åè¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ç”¨è„šæœ¬å‘èµ·é€šä¿¡ï¼Œå°±å¯ä»¥å«åš AJAX é€šä¿¡ã€‚W3C ä¹Ÿåœ¨2006å¹´å‘å¸ƒäº†å®ƒçš„å›½é™…æ ‡å‡†ã€‚">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-df69a0c8.css" as="style"><link rel="stylesheet" href="/assets/style-df69a0c8.css">
    <link rel="modulepreload" href="/assets/app-a7d5173b.js"><link rel="modulepreload" href="/assets/xmlhttprequest.html-58e40eee.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/xmlhttprequest.html-bba563c2.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="/avatar.png" alt="Yang&#39;s Blog"><!----><span class="vp-site-name hide-in-pad">Yang&#39;s Blog</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="é¦–é¡µ" class="vp-link nav-link nav-link" href="/"><span class="font-icon icon iconfont icon-home" style=""></span>é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å‰ç«¯å¼€å‘"><span class="title"><span class="font-icon icon iconfont icon-html" style=""></span>å‰ç«¯å¼€å‘</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æŠ€æœ¯</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="HTML" class="vp-link nav-link nav-link" href="/fe/html/"><span class="font-icon icon iconfont icon-html" style=""></span>HTML<!----></a></li><li class="dropdown-subitem"><a aria-label="CSS" class="vp-link nav-link nav-link" href="/fe/css/"><span class="font-icon icon iconfont icon-css" style=""></span>CSS<!----></a></li><li class="dropdown-subitem"><a aria-label="JavaScript" class="vp-link nav-link nav-link" href="/fe/javascript/"><span class="font-icon icon iconfont icon-javascript" style=""></span>JavaScript<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ¡†æ¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Vue" class="vp-link nav-link nav-link" href="/fe/vue/"><span class="font-icon icon iconfont icon-vue" style=""></span>Vue<!----></a></li><li class="dropdown-subitem"><a aria-label="React" class="vp-link nav-link nav-link" href="/fe/react/"><span class="font-icon icon iconfont icon-react" style=""></span>React<!----></a></li><li class="dropdown-subitem"><a aria-label="å¾®ä¿¡å°ç¨‹åº" class="vp-link nav-link nav-link" href="/fe/wxapp/"><span class="font-icon icon iconfont icon-wechat" style=""></span>å¾®ä¿¡å°ç¨‹åº<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="åç«¯å¼€å‘"><span class="title"><span class="font-icon icon iconfont icon-creative" style=""></span>åç«¯å¼€å‘</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="Java" class="vp-link nav-link nav-link" href="/rd/java/"><span class="font-icon icon iconfont icon-java" style=""></span>Java<!----></a></li><li class="dropdown-item"><a aria-label="Linux" class="vp-link nav-link nav-link" href="/rd/linux/"><span class="font-icon icon iconfont icon-linux" style=""></span>Linux<!----></a></li><li class="dropdown-item"><a aria-label="SQL" class="vp-link nav-link nav-link" href="/rd/sql/"><span class="font-icon icon iconfont icon-mysql" style=""></span>SQL<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ç¼–ç¨‹ç¬”è®°"><span class="title"><span class="font-icon icon iconfont icon-code" style=""></span>ç¼–ç¨‹ç¬”è®°</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="æ€»è§ˆ" class="vp-link nav-link nav-link" href="/notes/"><span class="font-icon icon iconfont icon-creative" style=""></span>æ€»è§ˆ<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å‰ç«¯ç¬”è®°</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="JavaScript" class="vp-link nav-link nav-link" href="/notes/javascript/"><span class="font-icon icon iconfont icon-javascript" style=""></span>JavaScript<!----></a></li><li class="dropdown-subitem"><a aria-label="TypeScript" class="vp-link nav-link nav-link" href="/notes/typescript/"><span class="font-icon icon iconfont icon-typescript" style=""></span>TypeScript<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>åç«¯ç¬”è®°</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Java" class="vp-link nav-link nav-link" href="/notes/java/"><span class="font-icon icon iconfont icon-article" style=""></span>Java<!----></a></li><li class="dropdown-subitem"><a aria-label="JDBC" class="vp-link nav-link nav-link" href="/notes/JDBC.html"><span class="font-icon icon iconfont icon-article" style=""></span>JDBC<!----></a></li><li class="dropdown-subitem"><a aria-label="MySQL" class="vp-link nav-link nav-link" href="/notes/MySQL.html"><span class="font-icon icon iconfont icon-article" style=""></span>MySQL<!----></a></li><li class="dropdown-subitem"><a aria-label="MyBatis" class="vp-link nav-link nav-link" href="/notes/MyBatis.html"><span class="font-icon icon iconfont icon-article" style=""></span>MyBatis<!----></a></li><li class="dropdown-subitem"><a aria-label="Redis" class="vp-link nav-link nav-link" href="/notes/Redis.html"><span class="font-icon icon iconfont icon-article" style=""></span>Redis<!----></a></li><li class="dropdown-subitem"><a aria-label="Linux" class="vp-link nav-link nav-link" href="/notes/Linux.html"><span class="font-icon icon iconfont icon-article" style=""></span>Linux<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å…¶ä»–</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="å…¶å®ƒç¬”è®°" class="vp-link nav-link nav-link" href="/notes/other/"><span class="font-icon icon iconfont icon-article" style=""></span>å…¶å®ƒç¬”è®°<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="æŠ€æœ¯æ–‡æ¡£"><span class="title"><span class="font-icon icon iconfont icon-repo" style=""></span>æŠ€æœ¯æ–‡æ¡£</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a aria-label="æ€»è§ˆ" class="vp-link nav-link nav-link" href="/technology/"><span class="font-icon icon iconfont icon-creative" style=""></span>æ€»è§ˆ<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ–‡æ¡£åˆ—è¡¨</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="html" class="vp-link nav-link nav-link" href="/technology/html/"><span class="font-icon icon iconfont icon-article" style=""></span>html<!----></a></li><li class="dropdown-subitem"><a aria-label="javascript" class="vp-link nav-link active nav-link active" href="/technology/javascript/"><span class="font-icon icon iconfont icon-article" style=""></span>javascript<!----></a></li><li class="dropdown-subitem"><a aria-label="es6" class="vp-link nav-link nav-link" href="/technology/es6/"><span class="font-icon icon iconfont icon-article" style=""></span>es6<!----></a></li><li class="dropdown-subitem"><a aria-label="webapi" class="vp-link nav-link nav-link" href="/technology/webapi/"><span class="font-icon icon iconfont icon-article" style=""></span>webapi<!----></a></li><li class="dropdown-subitem"><a aria-label="bash" class="vp-link nav-link nav-link" href="/technology/bash/"><span class="font-icon icon iconfont icon-article" style=""></span>bash<!----></a></li><li class="dropdown-subitem"><a aria-label="ssh" class="vp-link nav-link nav-link" href="/technology/ssh/"><span class="font-icon icon iconfont icon-article" style=""></span>ssh<!----></a></li><li class="dropdown-subitem"><a aria-label="git" class="vp-link nav-link nav-link" href="/technology/git/"><span class="font-icon icon iconfont icon-article" style=""></span>git<!----></a></li><li class="dropdown-subitem"><a aria-label="github" class="vp-link nav-link nav-link" href="/technology/github/"><span class="font-icon icon iconfont icon-article" style=""></span>github<!----></a></li><li class="dropdown-subitem"><a aria-label="ts_axios" class="vp-link nav-link nav-link" href="/technology/ts_axios/"><span class="font-icon icon iconfont icon-article" style=""></span>ts_axios<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a aria-label="è½¯ä»¶æ•™ç¨‹" class="vp-link nav-link nav-link" href="/software/"><span class="font-icon icon iconfont icon-software" style=""></span>è½¯ä»¶æ•™ç¨‹<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="å…³äº" class="vp-link nav-link nav-link" href="/about/"><span class="font-icon icon iconfont icon-profile" style=""></span>å…³äº<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/sunzhenyang/sunzhenyang.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">å…¥é—¨ç¯‡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">æ•°æ®ç±»å‹</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">è¿ç®—ç¬¦</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">è¯­æ³•ä¸“é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">æ ‡å‡†åº“</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">é¢å‘å¯¹è±¡ç¼–ç¨‹</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">å¼‚æ­¥æ“ä½œ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">DOM</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">äº‹ä»¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">æµè§ˆå™¨æ¨¡å‹</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a aria-label="æ¦‚è¿°" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/engine.html"><span class="font-icon icon iconfont icon-article" style=""></span>æ¦‚è¿°<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="window å¯¹è±¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/window.html"><span class="font-icon icon iconfont icon-article" style=""></span>window å¯¹è±¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Navigator å¯¹è±¡ï¼ŒScreen å¯¹è±¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/navigator.html"><span class="font-icon icon iconfont icon-article" style=""></span>Navigator å¯¹è±¡ï¼ŒScreen å¯¹è±¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Cookie" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/cookie.html"><span class="font-icon icon iconfont icon-article" style=""></span>Cookie<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="XMLHttpRequest å¯¹è±¡" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/technology/javascript/bom/xmlhttprequest.html"><span class="font-icon icon iconfont icon-article" style=""></span>XMLHttpRequest å¯¹è±¡<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="ç®€ä»‹" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#ç®€ä»‹"><!---->ç®€ä»‹<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest çš„å®ä¾‹å±æ€§" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-çš„å®ä¾‹å±æ€§"><!---->XMLHttpRequest çš„å®ä¾‹å±æ€§<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.readyState" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-readystate"><!---->XMLHttpRequest.readyState<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.onreadystatechange" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-onreadystatechange"><!---->XMLHttpRequest.onreadystatechange<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.response" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-response"><!---->XMLHttpRequest.response<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.responseType" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-responsetype"><!---->XMLHttpRequest.responseType<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.responseText" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-responsetext"><!---->XMLHttpRequest.responseText<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.responseXML" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-responsexml"><!---->XMLHttpRequest.responseXML<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.responseURL" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-responseurl"><!---->XMLHttpRequest.responseURL<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.statusï¼ŒXMLHttpRequest.statusText" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-status-xmlhttprequest-statustext"><!---->XMLHttpRequest.statusï¼ŒXMLHttpRequest.statusText<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.timeoutï¼ŒXMLHttpRequestEventTarget.ontimeout" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-timeout-xmlhttprequesteventtarget-ontimeout"><!---->XMLHttpRequest.timeoutï¼ŒXMLHttpRequestEventTarget.ontimeout<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="äº‹ä»¶ç›‘å¬å±æ€§" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#äº‹ä»¶ç›‘å¬å±æ€§"><!---->äº‹ä»¶ç›‘å¬å±æ€§<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.withCredentials" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-withcredentials"><!---->XMLHttpRequest.withCredentials<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.upload" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-upload"><!---->XMLHttpRequest.upload<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest çš„å®ä¾‹æ–¹æ³•" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-çš„å®ä¾‹æ–¹æ³•"><!---->XMLHttpRequest çš„å®ä¾‹æ–¹æ³•<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.open()" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-open"><!---->XMLHttpRequest.open()<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.send()" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-send"><!---->XMLHttpRequest.send()<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.setRequestHeader()" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-setrequestheader"><!---->XMLHttpRequest.setRequestHeader()<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.overrideMimeType()" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-overridemimetype"><!---->XMLHttpRequest.overrideMimeType()<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.getResponseHeader()" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-getresponseheader"><!---->XMLHttpRequest.getResponseHeader()<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.getAllResponseHeaders()" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-getallresponseheaders"><!---->XMLHttpRequest.getAllResponseHeaders()<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest.abort()" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-abort"><!---->XMLHttpRequest.abort()<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="XMLHttpRequest å®ä¾‹çš„äº‹ä»¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#xmlhttprequest-å®ä¾‹çš„äº‹ä»¶"><!---->XMLHttpRequest å®ä¾‹çš„äº‹ä»¶<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="readyStateChange äº‹ä»¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#readystatechange-äº‹ä»¶"><!---->readyStateChange äº‹ä»¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="progress äº‹ä»¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#progress-äº‹ä»¶"><!---->progress äº‹ä»¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="load äº‹ä»¶ã€error äº‹ä»¶ã€abort äº‹ä»¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#load-äº‹ä»¶ã€error-äº‹ä»¶ã€abort-äº‹ä»¶"><!---->load äº‹ä»¶ã€error äº‹ä»¶ã€abort äº‹ä»¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="loadend äº‹ä»¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#loadend-äº‹ä»¶"><!---->loadend äº‹ä»¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="timeout äº‹ä»¶" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#timeout-äº‹ä»¶"><!---->timeout äº‹ä»¶<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="Navigator.sendBeacon()" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/technology/javascript/bom/xmlhttprequest.html#navigator-sendbeacon"><!---->Navigator.sendBeacon()<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-label="åŒæºé™åˆ¶" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/same-origin.html"><span class="font-icon icon iconfont icon-article" style=""></span>åŒæºé™åˆ¶<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="CORS é€šä¿¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/cors.html"><span class="font-icon icon iconfont icon-article" style=""></span>CORS é€šä¿¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Storage æ¥å£" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/storage.html"><span class="font-icon icon iconfont icon-article" style=""></span>Storage æ¥å£<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="History å¯¹è±¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/history.html"><span class="font-icon icon iconfont icon-article" style=""></span>History å¯¹è±¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Location å¯¹è±¡ï¼ŒURL å¯¹è±¡ï¼ŒURLSearchParams å¯¹è±¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/location.html"><span class="font-icon icon iconfont icon-article" style=""></span>Location å¯¹è±¡ï¼ŒURL å¯¹è±¡ï¼ŒURLSearchParams å¯¹è±¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="ArrayBuffer å¯¹è±¡ï¼ŒBlob å¯¹è±¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/arraybuffer.html"><span class="font-icon icon iconfont icon-article" style=""></span>ArrayBuffer å¯¹è±¡ï¼ŒBlob å¯¹è±¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="File å¯¹è±¡ï¼ŒFileList å¯¹è±¡ï¼ŒFileReader å¯¹è±¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/file.html"><span class="font-icon icon iconfont icon-article" style=""></span>File å¯¹è±¡ï¼ŒFileList å¯¹è±¡ï¼ŒFileReader å¯¹è±¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="è¡¨å•ï¼ŒFormData å¯¹è±¡" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/form.html"><span class="font-icon icon iconfont icon-article" style=""></span>è¡¨å•ï¼ŒFormData å¯¹è±¡<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="IndexedDB API" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/indexeddb.html"><span class="font-icon icon iconfont icon-article" style=""></span>IndexedDB API<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="Web Worker" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/technology/javascript/bom/webworker.html"><span class="font-icon icon iconfont icon-article" style=""></span>Web Worker<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">é™„å½•ï¼šç½‘é¡µå…ƒç´ æ¥å£</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-article" style=""></span>XMLHttpRequest å¯¹è±¡</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://codemake.fun/" target="_blank" rel="noopener noreferrer">Yang</a></span><span property="author" content="Yang"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-01-11T09:12:15.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 20 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT20M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category4" role>javascript</span><!--]--><meta property="articleSection" content="javascript"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag4" role>javascript</span><!--]--><meta property="keywords" content="javascript"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#ç®€ä»‹">ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#xmlhttprequest-çš„å®ä¾‹å±æ€§">XMLHttpRequest çš„å®ä¾‹å±æ€§</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-readystate">XMLHttpRequest.readyState</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-onreadystatechange">XMLHttpRequest.onreadystatechange</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-response">XMLHttpRequest.response</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-responsetype">XMLHttpRequest.responseType</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-responsetext">XMLHttpRequest.responseText</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-responsexml">XMLHttpRequest.responseXML</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-responseurl">XMLHttpRequest.responseURL</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-status-xmlhttprequest-statustext">XMLHttpRequest.statusï¼ŒXMLHttpRequest.statusText</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-timeout-xmlhttprequesteventtarget-ontimeout">XMLHttpRequest.timeoutï¼ŒXMLHttpRequestEventTarget.ontimeout</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#äº‹ä»¶ç›‘å¬å±æ€§">äº‹ä»¶ç›‘å¬å±æ€§</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-withcredentials">XMLHttpRequest.withCredentials</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-upload">XMLHttpRequest.upload</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#xmlhttprequest-çš„å®ä¾‹æ–¹æ³•">XMLHttpRequest çš„å®ä¾‹æ–¹æ³•</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-open">XMLHttpRequest.open()</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-send">XMLHttpRequest.send()</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-setrequestheader">XMLHttpRequest.setRequestHeader()</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-overridemimetype">XMLHttpRequest.overrideMimeType()</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-getresponseheader">XMLHttpRequest.getResponseHeader()</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-getallresponseheaders">XMLHttpRequest.getAllResponseHeaders()</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#xmlhttprequest-abort">XMLHttpRequest.abort()</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#xmlhttprequest-å®ä¾‹çš„äº‹ä»¶">XMLHttpRequest å®ä¾‹çš„äº‹ä»¶</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#readystatechange-äº‹ä»¶">readyStateChange äº‹ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#progress-äº‹ä»¶">progress äº‹ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#load-äº‹ä»¶ã€error-äº‹ä»¶ã€abort-äº‹ä»¶">load äº‹ä»¶ã€error äº‹ä»¶ã€abort äº‹ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#loadend-äº‹ä»¶">loadend äº‹ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="/#timeout-äº‹ä»¶">timeout äº‹ä»¶</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="/#navigator-sendbeacon">Navigator.sendBeacon()</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹" aria-hidden="true">#</a> ç®€ä»‹</h2><p>æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´ï¼Œé‡‡ç”¨ HTTP åè®®é€šä¿¡ã€‚ç”¨æˆ·åœ¨æµè§ˆå™¨åœ°å€æ é”®å…¥ä¸€ä¸ªç½‘å€ï¼Œæˆ–è€…é€šè¿‡ç½‘é¡µè¡¨å•å‘æœåŠ¡å™¨æäº¤å†…å®¹ï¼Œè¿™æ—¶æµè§ˆå™¨å°±ä¼šå‘æœåŠ¡å™¨å‘å‡º HTTP è¯·æ±‚ã€‚</p><p>1999å¹´ï¼Œå¾®è½¯å…¬å¸å‘å¸ƒ IE æµè§ˆå™¨5.0ç‰ˆï¼Œç¬¬ä¸€æ¬¡å¼•å…¥æ–°åŠŸèƒ½ï¼šå…è®¸ JavaScript è„šæœ¬å‘æœåŠ¡å™¨å‘èµ· HTTP è¯·æ±‚ã€‚è¿™ä¸ªåŠŸèƒ½å½“æ—¶å¹¶æ²¡æœ‰å¼•èµ·æ³¨æ„ï¼Œç›´åˆ°2004å¹´ Gmail å‘å¸ƒå’Œ2005å¹´ Google Map å‘å¸ƒï¼Œæ‰å¼•èµ·å¹¿æ³›é‡è§†ã€‚2005å¹´2æœˆï¼ŒAJAX è¿™ä¸ªè¯ç¬¬ä¸€æ¬¡æ­£å¼æå‡ºï¼Œå®ƒæ˜¯ Asynchronous JavaScript and XML çš„ç¼©å†™ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡ JavaScript çš„å¼‚æ­¥é€šä¿¡ï¼Œä»æœåŠ¡å™¨è·å– XML æ–‡æ¡£ä»ä¸­æå–æ•°æ®ï¼Œå†æ›´æ–°å½“å‰ç½‘é¡µçš„å¯¹åº”éƒ¨åˆ†ï¼Œè€Œä¸ç”¨åˆ·æ–°æ•´ä¸ªç½‘é¡µã€‚åæ¥ï¼ŒAJAX è¿™ä¸ªè¯å°±æˆä¸º JavaScript è„šæœ¬å‘èµ· HTTP é€šä¿¡çš„ä»£åè¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ç”¨è„šæœ¬å‘èµ·é€šä¿¡ï¼Œå°±å¯ä»¥å«åš AJAX é€šä¿¡ã€‚W3C ä¹Ÿåœ¨2006å¹´å‘å¸ƒäº†å®ƒçš„å›½é™…æ ‡å‡†ã€‚</p><p>å…·ä½“æ¥è¯´ï¼ŒAJAX åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚</p><ol><li>åˆ›å»º XMLHttpRequest å®ä¾‹</li><li>å‘å‡º HTTP è¯·æ±‚</li><li>æ¥æ”¶æœåŠ¡å™¨ä¼ å›çš„æ•°æ®</li><li>æ›´æ–°ç½‘é¡µæ•°æ®</li></ol><p>æ¦‚æ‹¬èµ·æ¥ï¼Œå°±æ˜¯ä¸€å¥è¯ï¼ŒAJAX é€šè¿‡åŸç”Ÿçš„<code>XMLHttpRequest</code>å¯¹è±¡å‘å‡º HTTP è¯·æ±‚ï¼Œå¾—åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®åï¼Œå†è¿›è¡Œå¤„ç†ã€‚ç°åœ¨ï¼ŒæœåŠ¡å™¨è¿”å›çš„éƒ½æ˜¯ JSON æ ¼å¼çš„æ•°æ®ï¼ŒXML æ ¼å¼å·²ç»è¿‡æ—¶äº†ï¼Œä½†æ˜¯ AJAX è¿™ä¸ªåå­—å·²ç»æˆäº†ä¸€ä¸ªé€šç”¨åè¯ï¼Œå­—é¢å«ä¹‰å·²ç»æ¶ˆå¤±äº†ã€‚</p><p><code>XMLHttpRequest</code>å¯¹è±¡æ˜¯ AJAX çš„ä¸»è¦æ¥å£ï¼Œç”¨äºæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ã€‚å°½ç®¡åå­—é‡Œé¢æœ‰<code>XML</code>å’Œ<code>Http</code>ï¼Œå®ƒå®é™…ä¸Šå¯ä»¥ä½¿ç”¨å¤šç§åè®®ï¼ˆæ¯”å¦‚<code>file</code>æˆ–<code>ftp</code>ï¼‰ï¼Œå‘é€ä»»ä½•æ ¼å¼çš„æ•°æ®ï¼ˆåŒ…æ‹¬å­—ç¬¦ä¸²å’ŒäºŒè¿›åˆ¶ï¼‰ã€‚</p><p><code>XMLHttpRequest</code>æœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨<code>new</code>å‘½ä»¤ç”Ÿæˆå®ä¾‹ã€‚å®ƒæ²¡æœ‰ä»»ä½•å‚æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸€æ—¦æ–°å»ºå®ä¾‹ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>open()</code>æ–¹æ³•æŒ‡å®šå»ºç«‹ HTTP è¿æ¥çš„ä¸€äº›ç»†èŠ‚ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://www.example.com/page.php&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç æŒ‡å®šä½¿ç”¨ GET æ–¹æ³•ï¼Œè·ŸæŒ‡å®šçš„æœåŠ¡å™¨ç½‘å€å»ºç«‹è¿æ¥ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°<code>true</code>ï¼Œè¡¨ç¤ºè¯·æ±‚æ˜¯å¼‚æ­¥çš„ã€‚</p><p>ç„¶åï¼ŒæŒ‡å®šå›è°ƒå‡½æ•°ï¼Œç›‘å¬é€šä¿¡çŠ¶æ€ï¼ˆ<code>readyState</code>å±æ€§ï¼‰çš„å˜åŒ–ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> handleStateChange<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">handleStateChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€æ—¦<code>XMLHttpRequest</code>å®ä¾‹çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè°ƒç”¨ç›‘å¬å‡½æ•°<code>handleStateChange</code></p><p>æœ€åä½¿ç”¨<code>send()</code>æ–¹æ³•ï¼Œå®é™…å‘å‡ºè¯·æ±‚ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>send()</code>çš„å‚æ•°ä¸º<code>null</code>ï¼Œè¡¨ç¤ºå‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¸å¸¦æœ‰æ•°æ®ä½“ã€‚å¦‚æœå‘é€çš„æ˜¯ POST è¯·æ±‚ï¼Œè¿™é‡Œå°±éœ€è¦æŒ‡å®šæ•°æ®ä½“ã€‚</p><p>ä¸€æ—¦æ‹¿åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼ŒAJAX ä¸ä¼šåˆ·æ–°æ•´ä¸ªç½‘é¡µï¼Œè€Œæ˜¯åªæ›´æ–°ç½‘é¡µé‡Œé¢çš„ç›¸å…³éƒ¨åˆ†ï¼Œä»è€Œä¸æ‰“æ–­ç”¨æˆ·æ­£åœ¨åšçš„äº‹æƒ…ã€‚</p><p>æ³¨æ„ï¼ŒAJAX åªèƒ½å‘åŒæºç½‘å€ï¼ˆåè®®ã€åŸŸåã€ç«¯å£éƒ½ç›¸åŒï¼‰å‘å‡º HTTP è¯·æ±‚ï¼Œå¦‚æœå‘å‡ºè·¨åŸŸè¯·æ±‚ï¼Œå°±ä¼šæŠ¥é”™ï¼ˆè¯¦è§ã€ŠåŒæºæ”¿ç­–ã€‹å’Œã€ŠCORS é€šä¿¡ã€‹ä¸¤ç« ï¼‰ã€‚</p><p>ä¸‹é¢æ˜¯<code>XMLHttpRequest</code>å¯¹è±¡ç®€å•ç”¨æ³•çš„å®Œæ•´ä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// é€šä¿¡æˆåŠŸæ—¶ï¼ŒçŠ¶æ€å€¼ä¸º4</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/endpoint&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="xmlhttprequest-çš„å®ä¾‹å±æ€§" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-çš„å®ä¾‹å±æ€§" aria-hidden="true">#</a> XMLHttpRequest çš„å®ä¾‹å±æ€§</h2><h3 id="xmlhttprequest-readystate" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-readystate" aria-hidden="true">#</a> XMLHttpRequest.readyState</h3><p><code>XMLHttpRequest.readyState</code>è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå®ä¾‹å¯¹è±¡çš„å½“å‰çŠ¶æ€ã€‚è¯¥å±æ€§åªè¯»ã€‚å®ƒå¯èƒ½è¿”å›ä»¥ä¸‹å€¼ã€‚</p><ul><li>0ï¼Œè¡¨ç¤º XMLHttpRequest å®ä¾‹å·²ç»ç”Ÿæˆï¼Œä½†æ˜¯å®ä¾‹çš„<code>open()</code>æ–¹æ³•è¿˜æ²¡æœ‰è¢«è°ƒç”¨ã€‚</li><li>1ï¼Œè¡¨ç¤º<code>open()</code>æ–¹æ³•å·²ç»è°ƒç”¨ï¼Œä½†æ˜¯å®ä¾‹çš„<code>send()</code>æ–¹æ³•è¿˜æ²¡æœ‰è°ƒç”¨ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨å®ä¾‹çš„<code>setRequestHeader()</code>æ–¹æ³•ï¼Œè®¾å®š HTTP è¯·æ±‚çš„å¤´ä¿¡æ¯ã€‚</li><li>2ï¼Œè¡¨ç¤ºå®ä¾‹çš„<code>send()</code>æ–¹æ³•å·²ç»è°ƒç”¨ï¼Œå¹¶ä¸”æœåŠ¡å™¨è¿”å›çš„å¤´ä¿¡æ¯å’ŒçŠ¶æ€ç å·²ç»æ”¶åˆ°ã€‚</li><li>3ï¼Œè¡¨ç¤ºæ­£åœ¨æ¥æ”¶æœåŠ¡å™¨ä¼ æ¥çš„æ•°æ®ä½“ï¼ˆbody éƒ¨åˆ†ï¼‰ã€‚è¿™æ—¶ï¼Œå¦‚æœå®ä¾‹çš„<code>responseType</code>å±æ€§ç­‰äº<code>text</code>æˆ–è€…ç©ºå­—ç¬¦ä¸²ï¼Œ<code>responseText</code>å±æ€§å°±ä¼šåŒ…å«å·²ç»æ”¶åˆ°çš„éƒ¨åˆ†ä¿¡æ¯ã€‚</li><li>4ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è¿”å›çš„æ•°æ®å·²ç»å®Œå…¨æ¥æ”¶ï¼Œæˆ–è€…æœ¬æ¬¡æ¥æ”¶å·²ç»å¤±è´¥ã€‚</li></ul><p>é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œæ¯å½“å®ä¾‹å¯¹è±¡å‘ç”ŸçŠ¶æ€å˜åŒ–ï¼Œå®ƒçš„<code>readyState</code>å±æ€§çš„å€¼å°±ä¼šæ”¹å˜ã€‚è¿™ä¸ªå€¼æ¯ä¸€æ¬¡å˜åŒ–ï¼Œéƒ½ä¼šè§¦å‘<code>readyStateChange</code>äº‹ä»¶ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¯·æ±‚ç»“æŸï¼Œå¤„ç†æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ˜¾ç¤ºæç¤ºâ€œåŠ è½½ä¸­â€¦â€¦â€</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>xhr.readyState</code>ç­‰äº<code>4</code>æ—¶ï¼Œè¡¨æ˜è„šæœ¬å‘å‡ºçš„ HTTP è¯·æ±‚å·²ç»å®Œæˆã€‚å…¶ä»–æƒ…å†µï¼Œéƒ½è¡¨ç¤º HTTP è¯·æ±‚è¿˜åœ¨è¿›è¡Œä¸­ã€‚</p><h3 id="xmlhttprequest-onreadystatechange" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-onreadystatechange" aria-hidden="true">#</a> XMLHttpRequest.onreadystatechange</h3><p><code>XMLHttpRequest.onreadystatechange</code>å±æ€§æŒ‡å‘ä¸€ä¸ªç›‘å¬å‡½æ•°ã€‚<code>readystatechange</code>äº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆå®ä¾‹çš„<code>readyState</code>å±æ€§å˜åŒ–ï¼‰ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªå±æ€§ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœä½¿ç”¨å®ä¾‹çš„<code>abort()</code>æ–¹æ³•ï¼Œç»ˆæ­¢ XMLHttpRequest è¯·æ±‚ï¼Œä¹Ÿä¼šé€ æˆ<code>readyState</code>å±æ€§å˜åŒ–ï¼Œå¯¼è‡´è°ƒç”¨<code>XMLHttpRequest.onreadystatechange</code>å±æ€§ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://example.com&#39;</span> <span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">!==</span> <span class="token number">4</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xmlhttprequest-response" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-response" aria-hidden="true">#</a> XMLHttpRequest.response</h3><p><code>XMLHttpRequest.response</code>å±æ€§è¡¨ç¤ºæœåŠ¡å™¨è¿”å›çš„æ•°æ®ä½“ï¼ˆå³ HTTP å›åº”çš„ body éƒ¨åˆ†ï¼‰ã€‚å®ƒå¯èƒ½æ˜¯ä»»ä½•æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ã€å¯¹è±¡ã€äºŒè¿›åˆ¶å¯¹è±¡ç­‰ç­‰ï¼Œå…·ä½“çš„ç±»å‹ç”±<code>XMLHttpRequest.responseType</code>å±æ€§å†³å®šã€‚è¯¥å±æ€§åªè¯»ã€‚</p><p>å¦‚æœæœ¬æ¬¡è¯·æ±‚æ²¡æœ‰æˆåŠŸæˆ–è€…æ•°æ®ä¸å®Œæ•´ï¼Œè¯¥å±æ€§ç­‰äº<code>null</code>ã€‚ä½†æ˜¯ï¼Œå¦‚æœ<code>responseType</code>å±æ€§ç­‰äº<code>text</code>æˆ–ç©ºå­—ç¬¦ä¸²ï¼Œåœ¨è¯·æ±‚æ²¡æœ‰ç»“æŸä¹‹å‰ï¼ˆ<code>readyState</code>ç­‰äº3çš„é˜¶æ®µï¼‰ï¼Œ<code>response</code>å±æ€§åŒ…å«æœåŠ¡å™¨å·²ç»è¿”å›çš„éƒ¨åˆ†æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handler</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xmlhttprequest-responsetype" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-responsetype" aria-hidden="true">#</a> XMLHttpRequest.responseType</h3><p><code>XMLHttpRequest.responseType</code>å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è¿”å›æ•°æ®çš„ç±»å‹ã€‚è¿™ä¸ªå±æ€§æ˜¯å¯å†™çš„ï¼Œå¯ä»¥åœ¨è°ƒç”¨<code>open()</code>æ–¹æ³•ä¹‹åã€è°ƒç”¨<code>send()</code>æ–¹æ³•ä¹‹å‰ï¼Œè®¾ç½®è¿™ä¸ªå±æ€§çš„å€¼ï¼Œå‘Šè¯‰æµè§ˆå™¨å¦‚ä½•è§£è¯»è¿”å›çš„æ•°æ®ã€‚å¦‚æœ<code>responseType</code>è®¾ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå°±ç­‰åŒäºé»˜è®¤å€¼<code>text</code>ã€‚</p><p><code>XMLHttpRequest.responseType</code>å±æ€§å¯ä»¥ç­‰äºä»¥ä¸‹å€¼ã€‚</p><ul><li>&quot;&quot;ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ï¼šç­‰åŒäº<code>text</code>ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è¿”å›æ–‡æœ¬æ•°æ®ã€‚</li><li>&quot;arraybuffer&quot;ï¼šArrayBuffer å¯¹è±¡ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è¿”å›äºŒè¿›åˆ¶æ•°ç»„ã€‚</li><li>&quot;blob&quot;ï¼šBlob å¯¹è±¡ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è¿”å›äºŒè¿›åˆ¶å¯¹è±¡ã€‚</li><li>&quot;document&quot;ï¼šDocument å¯¹è±¡ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è¿”å›ä¸€ä¸ªæ–‡æ¡£å¯¹è±¡ã€‚</li><li>&quot;json&quot;ï¼šJSON å¯¹è±¡ã€‚</li><li>&quot;text&quot;ï¼šå­—ç¬¦ä¸²ã€‚</li></ul><p>ä¸Šé¢å‡ ç§ç±»å‹ä¹‹ä¸­ï¼Œ<code>text</code>ç±»å‹é€‚åˆå¤§å¤šæ•°æƒ…å†µï¼Œè€Œä¸”ç›´æ¥å¤„ç†æ–‡æœ¬ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ã€‚<code>document</code>ç±»å‹é€‚åˆè¿”å› HTML / XML æ–‡æ¡£çš„æƒ…å†µï¼Œè¿™æ„å‘³ç€ï¼Œå¯¹äºé‚£äº›æ‰“å¼€ CORS çš„ç½‘ç«™ï¼Œå¯ä»¥ç›´æ¥ç”¨ Ajax æŠ“å–ç½‘é¡µï¼Œç„¶åä¸ç”¨è§£æ HTML å­—ç¬¦ä¸²ï¼Œç›´æ¥å¯¹æŠ“å–å›æ¥çš„æ•°æ®è¿›è¡Œ DOM æ“ä½œã€‚<code>blob</code>ç±»å‹é€‚åˆè¯»å–äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯”å¦‚å›¾ç‰‡æ–‡ä»¶ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/path/to/image.png&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&#39;blob&#39;</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;image/png&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æˆ–è€…</span>
    <span class="token keyword">var</span> blob <span class="token operator">=</span> xhr<span class="token punctuation">.</span>response<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœå°†è¿™ä¸ªå±æ€§è®¾ä¸º<code>ArrayBuffer</code>ï¼Œå°±å¯ä»¥æŒ‰ç…§æ•°ç»„çš„æ–¹å¼å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/path/to/image.png&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&#39;arraybuffer&#39;</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> uInt8Array <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> uInt8Array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// var byte = uInt8Array[i];</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœå°†è¿™ä¸ªå±æ€§è®¾ä¸º<code>json</code>ï¼Œæµè§ˆå™¨å°±ä¼šè‡ªåŠ¨å¯¹è¿”å›æ•°æ®è°ƒç”¨<code>JSON.parse()</code>æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»<code>xhr.response</code>å±æ€§ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯<code>xhr.responseText</code>å±æ€§ï¼‰å¾—åˆ°çš„ä¸æ˜¯æ–‡æœ¬ï¼Œè€Œæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ã€‚</p><h3 id="xmlhttprequest-responsetext" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-responsetext" aria-hidden="true">#</a> XMLHttpRequest.responseText</h3><p><code>XMLHttpRequest.responseText</code>å±æ€§è¿”å›ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å­—ç¬¦ä¸²ï¼Œè¯¥å±æ€§ä¸ºåªè¯»ã€‚åªæœ‰ HTTP è¯·æ±‚å®Œæˆæ¥æ”¶ä»¥åï¼Œè¯¥å±æ€§æ‰ä¼šåŒ…å«å®Œæ•´çš„æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xmlhttprequest-responsexml" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-responsexml" aria-hidden="true">#</a> XMLHttpRequest.responseXML</h3><p><code>XMLHttpRequest.responseXML</code>å±æ€§è¿”å›ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„ HTML æˆ– XML æ–‡æ¡£å¯¹è±¡ï¼Œè¯¥å±æ€§ä¸ºåªè¯»ã€‚å¦‚æœæœ¬æ¬¡è¯·æ±‚æ²¡æœ‰æˆåŠŸï¼Œæˆ–è€…æ”¶åˆ°çš„æ•°æ®ä¸èƒ½è¢«è§£æä¸º XML æˆ– HTMLï¼Œè¯¥å±æ€§ç­‰äº<code>null</code>ã€‚</p><p>è¯¥å±æ€§ç”Ÿæ•ˆçš„å‰ææ˜¯ HTTP å›åº”çš„<code>Content-Type</code>å¤´ä¿¡æ¯ç­‰äº<code>text/xml</code>æˆ–<code>application/xml</code>ã€‚è¿™è¦æ±‚åœ¨å‘é€è¯·æ±‚å‰ï¼Œ<code>XMLHttpRequest.responseType</code>å±æ€§è¦è®¾ä¸º<code>document</code>ã€‚å¦‚æœ HTTP å›åº”çš„<code>Content-Type</code>å¤´ä¿¡æ¯ä¸ç­‰äº<code>text/xml</code>å’Œ<code>application/xml</code>ï¼Œä½†æ˜¯æƒ³ä»<code>responseXML</code>æ‹¿åˆ°æ•°æ®ï¼ˆå³æŠŠæ•°æ®æŒ‰ç…§ DOM æ ¼å¼è§£æï¼‰ï¼Œé‚£ä¹ˆéœ€è¦æ‰‹åŠ¨è°ƒç”¨<code>XMLHttpRequest.overrideMimeType()</code>æ–¹æ³•ï¼Œå¼ºåˆ¶è¿›è¡Œ XML è§£æã€‚</p><p>è¯¥å±æ€§å¾—åˆ°çš„æ•°æ®ï¼Œæ˜¯ç›´æ¥è§£æåçš„æ–‡æ¡£ DOM æ ‘ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&#39;document&#39;</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">overrideMimeType</span><span class="token punctuation">(</span><span class="token string">&#39;text/xml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseXML<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xmlhttprequest-responseurl" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-responseurl" aria-hidden="true">#</a> XMLHttpRequest.responseURL</h3><p><code>XMLHttpRequest.responseURL</code>å±æ€§æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå‘é€æ•°æ®çš„æœåŠ¡å™¨çš„ç½‘å€ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://example.com/test&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿”å› http://example.com/test</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œè¿™ä¸ªå±æ€§çš„å€¼ä¸<code>open()</code>æ–¹æ³•æŒ‡å®šçš„è¯·æ±‚ç½‘å€ä¸ä¸€å®šç›¸åŒã€‚å¦‚æœæœåŠ¡å™¨ç«¯å‘ç”Ÿè·³è½¬ï¼Œè¿™ä¸ªå±æ€§è¿”å›æœ€åå®é™…è¿”å›æ•°æ®çš„ç½‘å€ã€‚å¦å¤–ï¼Œå¦‚æœåŸå§‹ URL åŒ…æ‹¬é”šç‚¹ï¼ˆfragmentï¼‰ï¼Œè¯¥å±æ€§ä¼šæŠŠé”šç‚¹å‰¥ç¦»ã€‚</p><h3 id="xmlhttprequest-status-xmlhttprequest-statustext" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-status-xmlhttprequest-statustext" aria-hidden="true">#</a> XMLHttpRequest.statusï¼ŒXMLHttpRequest.statusText</h3><p><code>XMLHttpRequest.status</code>å±æ€§è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœåŠ¡å™¨å›åº”çš„ HTTP çŠ¶æ€ç ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœé€šä¿¡æˆåŠŸçš„è¯ï¼Œè¿™ä¸ªçŠ¶æ€ç æ˜¯200ï¼›å¦‚æœæœåŠ¡å™¨æ²¡æœ‰è¿”å›çŠ¶æ€ç ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§é»˜è®¤æ˜¯200ã€‚è¯·æ±‚å‘å‡ºä¹‹å‰ï¼Œè¯¥å±æ€§ä¸º<code>0</code>ã€‚è¯¥å±æ€§åªè¯»ã€‚</p><ul><li>200, OKï¼Œè®¿é—®æ­£å¸¸</li><li>301, Moved Permanentlyï¼Œæ°¸ä¹…ç§»åŠ¨</li><li>302, Moved temporarilyï¼Œæš‚æ—¶ç§»åŠ¨</li><li>304, Not Modifiedï¼Œæœªä¿®æ”¹</li><li>307, Temporary Redirectï¼Œæš‚æ—¶é‡å®šå‘</li><li>401, Unauthorizedï¼Œæœªæˆæƒ</li><li>403, Forbiddenï¼Œç¦æ­¢è®¿é—®</li><li>404, Not Foundï¼Œæœªå‘ç°æŒ‡å®šç½‘å€</li><li>500, Internal Server Errorï¼ŒæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯</li></ul><p>åŸºæœ¬ä¸Šï¼Œåªæœ‰2xxå’Œ304çš„çŠ¶æ€ç ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è¿”å›æ˜¯æ­£å¸¸çŠ¶æ€ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span>
    <span class="token operator">||</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¤„ç†æœåŠ¡å™¨çš„è¿”å›æ•°æ®</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// å‡ºé”™</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>XMLHttpRequest.statusText</code>å±æ€§è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæœåŠ¡å™¨å‘é€çš„çŠ¶æ€æç¤ºã€‚ä¸åŒäº<code>status</code>å±æ€§ï¼Œè¯¥å±æ€§åŒ…å«æ•´ä¸ªçŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚â€œOKâ€å’Œâ€œNot Foundâ€ã€‚åœ¨è¯·æ±‚å‘é€ä¹‹å‰ï¼ˆå³è°ƒç”¨<code>open()</code>æ–¹æ³•ä¹‹å‰ï¼‰ï¼Œè¯¥å±æ€§çš„å€¼æ˜¯ç©ºå­—ç¬¦ä¸²ï¼›å¦‚æœæœåŠ¡å™¨æ²¡æœ‰è¿”å›çŠ¶æ€æç¤ºï¼Œè¯¥å±æ€§çš„å€¼é»˜è®¤ä¸ºâ€œOKâ€ã€‚è¯¥å±æ€§ä¸ºåªè¯»å±æ€§ã€‚</p><h3 id="xmlhttprequest-timeout-xmlhttprequesteventtarget-ontimeout" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-timeout-xmlhttprequesteventtarget-ontimeout" aria-hidden="true">#</a> XMLHttpRequest.timeoutï¼ŒXMLHttpRequestEventTarget.ontimeout</h3><p><code>XMLHttpRequest.timeout</code>å±æ€§è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå¤šå°‘æ¯«ç§’åï¼Œå¦‚æœè¯·æ±‚ä»ç„¶æ²¡æœ‰å¾—åˆ°ç»“æœï¼Œå°±ä¼šè‡ªåŠ¨ç»ˆæ­¢ã€‚å¦‚æœè¯¥å±æ€§ç­‰äº0ï¼Œå°±è¡¨ç¤ºæ²¡æœ‰æ—¶é—´é™åˆ¶ã€‚</p><p><code>XMLHttpRequestEventTarget.ontimeout</code>å±æ€§ç”¨äºè®¾ç½®ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œå¦‚æœå‘ç”Ÿ timeout äº‹ä»¶ï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªç›‘å¬å‡½æ•°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">&#39;/server&#39;</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;The request for &#39;</span> <span class="token operator">+</span> url <span class="token operator">+</span> <span class="token string">&#39; timed out.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¤„ç†æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æŒ‡å®š 10 ç§’é’Ÿè¶…æ—¶</span>
xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="äº‹ä»¶ç›‘å¬å±æ€§" tabindex="-1"><a class="header-anchor" href="#äº‹ä»¶ç›‘å¬å±æ€§" aria-hidden="true">#</a> äº‹ä»¶ç›‘å¬å±æ€§</h3><p>XMLHttpRequest å¯¹è±¡å¯ä»¥å¯¹ä»¥ä¸‹äº‹ä»¶æŒ‡å®šç›‘å¬å‡½æ•°ã€‚</p><ul><li>XMLHttpRequest.onloadstartï¼šloadstart äº‹ä»¶ï¼ˆHTTP è¯·æ±‚å‘å‡ºï¼‰çš„ç›‘å¬å‡½æ•°</li><li>XMLHttpRequest.onprogressï¼šprogressäº‹ä»¶ï¼ˆæ­£åœ¨å‘é€å’ŒåŠ è½½æ•°æ®ï¼‰çš„ç›‘å¬å‡½æ•°</li><li>XMLHttpRequest.onabortï¼šabort äº‹ä»¶ï¼ˆè¯·æ±‚ä¸­æ­¢ï¼Œæ¯”å¦‚ç”¨æˆ·è°ƒç”¨äº†<code>abort()</code>æ–¹æ³•ï¼‰çš„ç›‘å¬å‡½æ•°</li><li>XMLHttpRequest.onerrorï¼šerror äº‹ä»¶ï¼ˆè¯·æ±‚å¤±è´¥ï¼‰çš„ç›‘å¬å‡½æ•°</li><li>XMLHttpRequest.onloadï¼šload äº‹ä»¶ï¼ˆè¯·æ±‚æˆåŠŸå®Œæˆï¼‰çš„ç›‘å¬å‡½æ•°</li><li>XMLHttpRequest.ontimeoutï¼štimeout äº‹ä»¶ï¼ˆç”¨æˆ·æŒ‡å®šçš„æ—¶é™è¶…è¿‡äº†ï¼Œè¯·æ±‚è¿˜æœªå®Œæˆï¼‰çš„ç›‘å¬å‡½æ•°</li><li>XMLHttpRequest.onloadendï¼šloadend äº‹ä»¶ï¼ˆè¯·æ±‚å®Œæˆï¼Œä¸ç®¡æˆåŠŸæˆ–å¤±è´¥ï¼‰çš„ç›‘å¬å‡½æ•°</li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> responseText <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// process the response.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onabort</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;The request was aborted&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>loaded<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;There was an error!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>progress</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°æœ‰ä¸€ä¸ªäº‹ä»¶å¯¹è±¡å‚æ•°ï¼Œè¯¥å¯¹è±¡æœ‰ä¸‰ä¸ªå±æ€§ï¼š<code>loaded</code>å±æ€§è¿”å›å·²ç»ä¼ è¾“çš„æ•°æ®é‡ï¼Œ<code>total</code>å±æ€§è¿”å›æ€»çš„æ•°æ®é‡ï¼Œ<code>lengthComputable</code>å±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåŠ è½½çš„è¿›åº¦æ˜¯å¦å¯ä»¥è®¡ç®—ã€‚æ‰€æœ‰è¿™äº›ç›‘å¬å‡½æ•°é‡Œé¢ï¼Œåªæœ‰<code>progress</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°æœ‰å‚æ•°ï¼Œå…¶ä»–å‡½æ•°éƒ½æ²¡æœ‰å‚æ•°ã€‚</p><p>æ³¨æ„ï¼Œå¦‚æœå‘ç”Ÿç½‘ç»œé”™è¯¯ï¼ˆæ¯”å¦‚æœåŠ¡å™¨æ— æ³•è¿é€šï¼‰ï¼Œ<code>onerror</code>äº‹ä»¶æ— æ³•è·å–æŠ¥é”™ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯èƒ½æ²¡æœ‰é”™è¯¯å¯¹è±¡ï¼Œæ‰€ä»¥è¿™æ ·åªèƒ½æ˜¾ç¤ºæŠ¥é”™çš„æç¤ºã€‚</p><h3 id="xmlhttprequest-withcredentials" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-withcredentials" aria-hidden="true">#</a> XMLHttpRequest.withCredentials</h3><p><code>XMLHttpRequest.withCredentials</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè·¨åŸŸè¯·æ±‚æ—¶ï¼Œç”¨æˆ·ä¿¡æ¯ï¼ˆæ¯”å¦‚ Cookie å’Œè®¤è¯çš„ HTTP å¤´ä¿¡æ¯ï¼‰æ˜¯å¦ä¼šåŒ…å«åœ¨è¯·æ±‚ä¹‹ä¸­ï¼Œé»˜è®¤ä¸º<code>false</code>ï¼Œå³å‘<code>example.com</code>å‘å‡ºè·¨åŸŸè¯·æ±‚æ—¶ï¼Œä¸ä¼šå‘é€<code>example.com</code>è®¾ç½®åœ¨æœ¬æœºä¸Šçš„ Cookieï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</p><p>å¦‚æœéœ€è¦è·¨åŸŸ AJAX è¯·æ±‚å‘é€ Cookieï¼Œéœ€è¦<code>withCredentials</code>å±æ€§è®¾ä¸º<code>true</code>ã€‚æ³¨æ„ï¼ŒåŒæºçš„è¯·æ±‚ä¸éœ€è¦è®¾ç½®è¿™ä¸ªå±æ€§ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://example.com/&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†è®©è¿™ä¸ªå±æ€§ç”Ÿæ•ˆï¼ŒæœåŠ¡å™¨å¿…é¡»æ˜¾å¼è¿”å›<code>Access-Control-Allow-Credentials</code>è¿™ä¸ªå¤´ä¿¡æ¯ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Credentials<span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>withCredentials</code>å±æ€§æ‰“å¼€çš„è¯ï¼Œè·¨åŸŸè¯·æ±‚ä¸ä»…ä¼šå‘é€ Cookieï¼Œè¿˜ä¼šè®¾ç½®è¿œç¨‹ä¸»æœºæŒ‡å®šçš„ Cookieã€‚åä¹‹ä¹Ÿæˆç«‹ï¼Œå¦‚æœ<code>withCredentials</code>å±æ€§æ²¡æœ‰æ‰“å¼€ï¼Œé‚£ä¹ˆè·¨åŸŸçš„ AJAX è¯·æ±‚å³ä½¿æ˜ç¡®è¦æ±‚æµè§ˆå™¨è®¾ç½® Cookieï¼Œæµè§ˆå™¨ä¹Ÿä¼šå¿½ç•¥ã€‚</p><p>æ³¨æ„ï¼Œè„šæœ¬æ€»æ˜¯éµå®ˆåŒæºæ”¿ç­–ï¼Œæ— æ³•ä»<code>document.cookie</code>æˆ–è€… HTTP å›åº”çš„å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œè¯»å–è·¨åŸŸçš„ Cookieï¼Œ<code>withCredentials</code>å±æ€§ä¸å½±å“è¿™ä¸€ç‚¹ã€‚</p><h3 id="xmlhttprequest-upload" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-upload" aria-hidden="true">#</a> XMLHttpRequest.upload</h3><p>XMLHttpRequest ä¸ä»…å¯ä»¥å‘é€è¯·æ±‚ï¼Œè¿˜å¯ä»¥å‘é€æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ AJAX æ–‡ä»¶ä¸Šä¼ ã€‚å‘é€æ–‡ä»¶ä»¥åï¼Œé€šè¿‡<code>XMLHttpRequest.upload</code>å±æ€§å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡è§‚å¯Ÿè¿™ä¸ªå¯¹è±¡ï¼Œå¯ä»¥å¾—çŸ¥ä¸Šä¼ çš„è¿›å±•ã€‚ä¸»è¦æ–¹æ³•å°±æ˜¯ç›‘å¬è¿™ä¸ªå¯¹è±¡çš„å„ç§äº‹ä»¶ï¼šloadstartã€loadendã€loadã€abortã€errorã€progressã€timeoutã€‚</p><p>å‡å®šç½‘é¡µä¸Šæœ‰ä¸€ä¸ª<code>&lt;progress&gt;</code>å…ƒç´ ã€‚</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code>&lt;progress min=&quot;0&quot; max=&quot;100&quot; value=&quot;0&quot;&gt;0% complete&lt;/progress&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œå¯¹<code>upload</code>å±æ€§æŒ‡å®š<code>progress</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œå³å¯è·å¾—ä¸Šä¼ çš„è¿›åº¦ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token parameter">blobOrFile</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> progressBar <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;progress&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      progressBar<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>loaded <span class="token operator">/</span> e<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token comment">// å…¼å®¹ä¸æ”¯æŒ &lt;progress&gt; å…ƒç´ çš„è€å¼æµè§ˆå™¨</span>
      progressBar<span class="token punctuation">.</span>textContent <span class="token operator">=</span> progressBar<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>blobOrFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">upload</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;hello world&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;text/plain&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="xmlhttprequest-çš„å®ä¾‹æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-çš„å®ä¾‹æ–¹æ³•" aria-hidden="true">#</a> XMLHttpRequest çš„å®ä¾‹æ–¹æ³•</h2><h3 id="xmlhttprequest-open" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-open" aria-hidden="true">#</a> XMLHttpRequest.open()</h3><p><code>XMLHttpRequest.open()</code>æ–¹æ³•ç”¨äºæŒ‡å®š HTTP è¯·æ±‚çš„å‚æ•°ï¼Œæˆ–è€…è¯´åˆå§‹åŒ– XMLHttpRequest å®ä¾‹å¯¹è±¡ã€‚å®ƒä¸€å…±å¯ä»¥æ¥å—äº”ä¸ªå‚æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">void</span> <span class="token function">open</span><span class="token punctuation">(</span>
   string method<span class="token punctuation">,</span>
   string url<span class="token punctuation">,</span>
   optional boolean async<span class="token punctuation">,</span>
   optional string user<span class="token punctuation">,</span>
   optional string password
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>method</code>ï¼šè¡¨ç¤º HTTP åŠ¨è¯æ–¹æ³•ï¼Œæ¯”å¦‚<code>GET</code>ã€<code>POST</code>ã€<code>PUT</code>ã€<code>DELETE</code>ã€<code>HEAD</code>ç­‰ã€‚</li><li><code>url</code>: è¡¨ç¤ºè¯·æ±‚å‘é€ç›®æ ‡ URLã€‚</li><li><code>async</code>: å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯·æ±‚æ˜¯å¦ä¸ºå¼‚æ­¥ï¼Œé»˜è®¤ä¸º<code>true</code>ã€‚å¦‚æœè®¾ä¸º<code>false</code>ï¼Œåˆ™<code>send()</code>æ–¹æ³•åªæœ‰ç­‰åˆ°æ”¶åˆ°æœåŠ¡å™¨è¿”å›äº†ç»“æœï¼Œæ‰ä¼šè¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚è¯¥å‚æ•°å¯é€‰ã€‚ç”±äºåŒæ­¥ AJAX è¯·æ±‚ä¼šé€ æˆæµè§ˆå™¨å¤±å»å“åº”ï¼Œè®¸å¤šæµè§ˆå™¨å·²ç»ç¦æ­¢åœ¨ä¸»çº¿ç¨‹ä½¿ç”¨ï¼Œåªå…è®¸ Worker é‡Œé¢ä½¿ç”¨ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªå‚æ•°è½»æ˜“ä¸åº”è¯¥è®¾ä¸º<code>false</code>ã€‚</li><li><code>user</code>ï¼šè¡¨ç¤ºç”¨äºè®¤è¯çš„ç”¨æˆ·åï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚è¯¥å‚æ•°å¯é€‰ã€‚</li><li><code>password</code>ï¼šè¡¨ç¤ºç”¨äºè®¤è¯çš„å¯†ç ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚è¯¥å‚æ•°å¯é€‰ã€‚</li></ul><p>æ³¨æ„ï¼Œå¦‚æœå¯¹ä½¿ç”¨è¿‡<code>open()</code>æ–¹æ³•çš„ AJAX è¯·æ±‚ï¼Œå†æ¬¡ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œç­‰åŒäºè°ƒç”¨<code>abort()</code>ï¼Œå³ç»ˆæ­¢è¯·æ±‚ã€‚</p><p>ä¸‹é¢å‘é€ POST è¯·æ±‚çš„ä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">&#39;someURL&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xmlhttprequest-send" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-send" aria-hidden="true">#</a> XMLHttpRequest.send()</h3><p><code>XMLHttpRequest.send()</code>æ–¹æ³•ç”¨äºå®é™…å‘å‡º HTTP è¯·æ±‚ã€‚å®ƒçš„å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸å¸¦å‚æ•°ï¼Œå°±è¡¨ç¤º HTTP è¯·æ±‚åªæœ‰ä¸€ä¸ª URLï¼Œæ²¡æœ‰æ•°æ®ä½“ï¼Œå…¸å‹ä¾‹å­å°±æ˜¯ GET è¯·æ±‚ï¼›å¦‚æœå¸¦æœ‰å‚æ•°ï¼Œå°±è¡¨ç¤ºé™¤äº†å¤´ä¿¡æ¯ï¼Œè¿˜å¸¦æœ‰åŒ…å«å…·ä½“æ•°æ®çš„ä¿¡æ¯ä½“ï¼Œå…¸å‹ä¾‹å­å°±æ˜¯ POST è¯·æ±‚ã€‚</p><p>ä¸‹é¢æ˜¯ GET è¯·æ±‚çš„ä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;http://www.example.com/?id=&#39;</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token boolean">true</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>GET</code>è¯·æ±‚çš„å‚æ•°ï¼Œä½œä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²é™„åŠ åœ¨ URL åé¢ã€‚</p><p>ä¸‹é¢æ˜¯å‘é€ POST è¯·æ±‚çš„ä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token string">&#39;email=&#39;</span>
  <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span>
  <span class="token operator">+</span> <span class="token string">&#39;&amp;password=&#39;</span>
  <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://www.example.com&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œæ‰€æœ‰ XMLHttpRequest çš„ç›‘å¬äº‹ä»¶ï¼Œéƒ½å¿…é¡»åœ¨<code>send()</code>æ–¹æ³•è°ƒç”¨ä¹‹å‰è®¾å®šã€‚</p><p><code>send</code>æ–¹æ³•çš„å‚æ•°å°±æ˜¯å‘é€çš„æ•°æ®ã€‚å¤šç§æ ¼å¼çš„æ•°æ®ï¼Œéƒ½å¯ä»¥ä½œä¸ºå®ƒçš„å‚æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span>ArrayBufferView data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span>Blob data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span>Document data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span>String data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span>FormData data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ<code>send()</code>å‘é€ DOM å¯¹è±¡ï¼Œåœ¨å‘é€ä¹‹å‰ï¼Œæ•°æ®ä¼šå…ˆè¢«ä¸²è¡ŒåŒ–ã€‚å¦‚æœå‘é€äºŒè¿›åˆ¶æ•°æ®ï¼Œæœ€å¥½æ˜¯å‘é€<code>ArrayBufferView</code>æˆ–<code>Blob</code>å¯¹è±¡ï¼Œè¿™ä½¿å¾—é€šè¿‡ Ajax ä¸Šä¼ æ–‡ä»¶æˆä¸ºå¯èƒ½ã€‚</p><p>ä¸‹é¢æ˜¯å‘é€è¡¨å•æ•°æ®çš„ä¾‹å­ã€‚<code>FormData</code>å¯¹è±¡å¯ä»¥ç”¨äºæ„é€ è¡¨å•æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¼ ä¸‰&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;email&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;zhangsan@example.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;birthDate&#39;</span><span class="token punctuation">,</span> <span class="token number">1940</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/register&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>FormData</code>å¯¹è±¡æ„é€ äº†è¡¨å•æ•°æ®ï¼Œç„¶åä½¿ç”¨<code>send()</code>æ–¹æ³•å‘é€ã€‚å®ƒçš„æ•ˆæœä¸å‘é€ä¸‹é¢çš„è¡¨å•æ•°æ®æ˜¯ä¸€æ ·çš„ã€‚</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>registration<span class="token punctuation">&#39;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>registration<span class="token punctuation">&#39;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>/register<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>text<span class="token punctuation">&#39;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>username<span class="token punctuation">&#39;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>å¼ ä¸‰<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>email<span class="token punctuation">&#39;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>email<span class="token punctuation">&#39;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>zhangsan@example.com<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>number<span class="token punctuation">&#39;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>birthDate<span class="token punctuation">&#39;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>1940<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>submit<span class="token punctuation">&#39;</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span><span class="token value javascript language-javascript"><span class="token keyword">return</span> <span class="token function">sendForm</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">&#39;</span></span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢çš„ä¾‹å­æ˜¯ä½¿ç”¨<code>FormData</code>å¯¹è±¡åŠ å·¥è¡¨å•æ•°æ®ï¼Œç„¶åå†å‘é€ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sendForm</span><span class="token punctuation">(</span><span class="token parameter">form</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>
  formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;csrf&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;e69a18d7db1286040586e6da1950128c&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> form<span class="token punctuation">.</span>action<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#registration&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sendForm</span><span class="token punctuation">(</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xmlhttprequest-setrequestheader" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-setrequestheader" aria-hidden="true">#</a> XMLHttpRequest.setRequestHeader()</h3><p><code>XMLHttpRequest.setRequestHeader()</code>æ–¹æ³•ç”¨äºè®¾ç½®æµè§ˆå™¨å‘é€çš„ HTTP è¯·æ±‚çš„å¤´ä¿¡æ¯ã€‚è¯¥æ–¹æ³•å¿…é¡»åœ¨<code>open()</code>ä¹‹åã€<code>send()</code>ä¹‹å‰è°ƒç”¨ã€‚å¦‚æœè¯¥æ–¹æ³•å¤šæ¬¡è°ƒç”¨ï¼Œè®¾å®šåŒä¸€ä¸ªå­—æ®µï¼Œåˆ™æ¯ä¸€æ¬¡è°ƒç”¨çš„å€¼ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„å€¼å‘é€ã€‚</p><p>è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå¤´ä¿¡æ¯çš„å­—æ®µåï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—æ®µå€¼ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;application/json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Length&#39;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç é¦–å…ˆè®¾ç½®å¤´ä¿¡æ¯<code>Content-Type</code>ï¼Œè¡¨ç¤ºå‘é€ JSON æ ¼å¼çš„æ•°æ®ï¼›ç„¶åè®¾ç½®<code>Content-Length</code>ï¼Œè¡¨ç¤ºæ•°æ®é•¿åº¦ï¼›æœ€åå‘é€ JSON æ•°æ®ã€‚</p><h3 id="xmlhttprequest-overridemimetype" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-overridemimetype" aria-hidden="true">#</a> XMLHttpRequest.overrideMimeType()</h3><p><code>XMLHttpRequest.overrideMimeType()</code>æ–¹æ³•ç”¨æ¥æŒ‡å®š MIME ç±»å‹ï¼Œè¦†ç›–æœåŠ¡å™¨è¿”å›çš„çœŸæ­£çš„ MIME ç±»å‹ï¼Œä»è€Œè®©æµè§ˆå™¨è¿›è¡Œä¸ä¸€æ ·çš„å¤„ç†ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒæœåŠ¡å™¨è¿”å›çš„æ•°æ®ç±»å‹æ˜¯<code>text/xml</code>ï¼Œç”±äºç§ç§åŸå› æµè§ˆå™¨è§£æä¸æˆåŠŸæŠ¥é”™ï¼Œè¿™æ—¶å°±æ‹¿ä¸åˆ°æ•°æ®äº†ã€‚ä¸ºäº†æ‹¿åˆ°åŸå§‹æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ MIME ç±»å‹æ”¹æˆ<code>text/plain</code>ï¼Œè¿™æ ·æµè§ˆå™¨å°±ä¸ä¼šå»è‡ªåŠ¨è§£æï¼Œä»è€Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°åŸå§‹æ–‡æœ¬äº†ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">overrideMimeType</span><span class="token punctuation">(</span><span class="token string">&#39;text/plain&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œè¯¥æ–¹æ³•å¿…é¡»åœ¨<code>send()</code>æ–¹æ³•ä¹‹å‰è°ƒç”¨ã€‚</p><p>ä¿®æ”¹æœåŠ¡å™¨è¿”å›çš„æ•°æ®ç±»å‹ï¼Œä¸æ˜¯æ­£å¸¸æƒ…å†µä¸‹åº”è¯¥é‡‡å–çš„æ–¹æ³•ã€‚å¦‚æœå¸Œæœ›æœåŠ¡å™¨è¿”å›æŒ‡å®šçš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨<code>responseType</code>å±æ€§å‘Šè¯‰æœåŠ¡å™¨ï¼Œå°±åƒä¸‹é¢çš„ä¾‹å­ã€‚åªæœ‰åœ¨æœåŠ¡å™¨æ— æ³•è¿”å›æŸç§æ•°æ®ç±»å‹æ—¶ï¼Œæ‰ä½¿ç”¨<code>overrideMimeType()</code>æ–¹æ³•ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arraybuffer <span class="token operator">=</span> xhr<span class="token punctuation">.</span>response<span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&#39;arraybuffer&#39;</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xmlhttprequest-getresponseheader" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-getresponseheader" aria-hidden="true">#</a> XMLHttpRequest.getResponseHeader()</h3><p><code>XMLHttpRequest.getResponseHeader()</code>æ–¹æ³•è¿”å› HTTP å¤´ä¿¡æ¯æŒ‡å®šå­—æ®µçš„å€¼ï¼Œå¦‚æœè¿˜æ²¡æœ‰æ”¶åˆ°æœåŠ¡å™¨å›åº”æˆ–è€…æŒ‡å®šå­—æ®µä¸å­˜åœ¨ï¼Œè¿”å›<code>null</code>ã€‚è¯¥æ–¹æ³•çš„å‚æ•°ä¸åŒºåˆ†å¤§å°å†™ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getHeaderTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Last-Modified&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;HEAD&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;yourpage.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>onload <span class="token operator">=</span> getHeaderTime<span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæœ‰å¤šä¸ªå­—æ®µåŒåï¼Œå®ƒä»¬çš„å€¼ä¼šè¢«è¿æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—æ®µä¹‹é—´ä½¿ç”¨â€œé€—å·+ç©ºæ ¼â€åˆ†éš”ã€‚</p><h3 id="xmlhttprequest-getallresponseheaders" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-getallresponseheaders" aria-hidden="true">#</a> XMLHttpRequest.getAllResponseHeaders()</h3><p><code>XMLHttpRequest.getAllResponseHeaders()</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæœåŠ¡å™¨å‘æ¥çš„æ‰€æœ‰ HTTP å¤´ä¿¡æ¯ã€‚æ ¼å¼ä¸ºå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå¤´ä¿¡æ¯ä¹‹é—´ä½¿ç”¨<code>CRLF</code>åˆ†éš”ï¼ˆå›è½¦+æ¢è¡Œï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°æœåŠ¡å™¨å›åº”ï¼Œè¯¥å±æ€§ä¸º<code>null</code>ã€‚å¦‚æœå‘ç”Ÿç½‘ç»œé”™è¯¯ï¼Œè¯¥å±æ€§ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;foo.txt&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> headers <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token function">getAllResponseHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ç”¨äºè·å–æœåŠ¡å™¨è¿”å›çš„æ‰€æœ‰å¤´ä¿¡æ¯ã€‚å®ƒå¯èƒ½æ˜¯ä¸‹é¢è¿™æ ·çš„å­—ç¬¦ä¸²ã€‚</p><div class="language-http line-numbers-mode" data-ext="http"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">date</span><span class="token punctuation">:</span> <span class="token header-value">Fri, 08 Dec 2017 21:04:30 GMT\r\n</span></span>
<span class="token header"><span class="token header-name keyword">content-encoding</span><span class="token punctuation">:</span> <span class="token header-value">gzip\r\n</span></span>
<span class="token header"><span class="token header-name keyword">x-content-type-options</span><span class="token punctuation">:</span> <span class="token header-value">nosniff\r\n</span></span>
<span class="token header"><span class="token header-name keyword">server</span><span class="token punctuation">:</span> <span class="token header-value">meinheld/0.6.1\r\n</span></span>
<span class="token header"><span class="token header-name keyword">x-frame-options</span><span class="token punctuation">:</span> <span class="token header-value">DENY\r\n</span></span>
<span class="token header"><span class="token header-name keyword">content-type</span><span class="token punctuation">:</span> <span class="token header-value">text/html; charset=utf-8\r\n</span></span>
<span class="token header"><span class="token header-name keyword">connection</span><span class="token punctuation">:</span> <span class="token header-value">keep-alive\r\n</span></span>
<span class="token header"><span class="token header-name keyword">strict-transport-security</span><span class="token punctuation">:</span> <span class="token header-value hsts languages-hsts">max-age=63072000\r\n</span></span>
<span class="token header"><span class="token header-name keyword">vary</span><span class="token punctuation">:</span> <span class="token header-value">Cookie, Accept-Encoding\r\n</span></span>
<span class="token header"><span class="token header-name keyword">content-length</span><span class="token punctuation">:</span> <span class="token header-value">6502\r\n</span></span>
<span class="token header"><span class="token header-name keyword">x-xss-protection</span><span class="token punctuation">:</span> <span class="token header-value">1; mode=block\r\n</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œå¯¹è¿™ä¸ªå­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> headers<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\r\n]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> headerMap <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">line</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> parts <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;: &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> header <span class="token operator">=</span> parts<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> value <span class="token operator">=</span> parts<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;: &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  headerMap<span class="token punctuation">[</span>header<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

headerMap<span class="token punctuation">[</span><span class="token string">&#39;content-length&#39;</span><span class="token punctuation">]</span> <span class="token comment">// &quot;6502&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="xmlhttprequest-abort" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-abort" aria-hidden="true">#</a> XMLHttpRequest.abort()</h3><p><code>XMLHttpRequest.abort()</code>æ–¹æ³•ç”¨æ¥ç»ˆæ­¢å·²ç»å‘å‡ºçš„ HTTP è¯·æ±‚ã€‚è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä»¥åï¼Œ<code>readyState</code>å±æ€§å˜ä¸º<code>4</code>ï¼Œ<code>status</code>å±æ€§å˜ä¸º<code>0</code>ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://www.example.com/page.php&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç åœ¨å‘å‡º5ç§’ä¹‹åï¼Œç»ˆæ­¢ä¸€ä¸ª AJAX è¯·æ±‚ã€‚</p><h2 id="xmlhttprequest-å®ä¾‹çš„äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-å®ä¾‹çš„äº‹ä»¶" aria-hidden="true">#</a> XMLHttpRequest å®ä¾‹çš„äº‹ä»¶</h2><h3 id="readystatechange-äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#readystatechange-äº‹ä»¶" aria-hidden="true">#</a> readyStateChange äº‹ä»¶</h3><p><code>readyState</code>å±æ€§çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¼šè§¦å‘ readyStateChange äº‹ä»¶ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>onReadyStateChange</code>å±æ€§ï¼ŒæŒ‡å®šè¿™ä¸ªäº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œå¯¹ä¸åŒçŠ¶æ€è¿›è¡Œä¸åŒå¤„ç†ã€‚å°¤å…¶æ˜¯å½“çŠ¶æ€å˜ä¸º<code>4</code>çš„æ—¶å€™ï¼Œè¡¨ç¤ºé€šä¿¡æˆåŠŸï¼Œè¿™æ—¶å›è°ƒå‡½æ•°å°±å¯ä»¥å¤„ç†æœåŠ¡å™¨ä¼ é€å›æ¥çš„æ•°æ®ã€‚</p><h3 id="progress-äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#progress-äº‹ä»¶" aria-hidden="true">#</a> progress äº‹ä»¶</h3><p>ä¸Šä¼ æ–‡ä»¶æ—¶ï¼ŒXMLHttpRequest å®ä¾‹å¯¹è±¡æœ¬èº«å’Œå®ä¾‹çš„<code>upload</code>å±æ€§ï¼Œéƒ½æœ‰ä¸€ä¸ª<code>progress</code>äº‹ä»¶ï¼Œä¼šä¸æ–­è¿”å›ä¸Šä¼ çš„è¿›åº¦ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">updateProgress</span> <span class="token punctuation">(</span><span class="token parameter">oEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>oEvent<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> percentComplete <span class="token operator">=</span> oEvent<span class="token punctuation">.</span>loaded <span class="token operator">/</span> oEvent<span class="token punctuation">.</span>total<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ— æ³•è®¡ç®—è¿›å±•&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;progress&#39;</span><span class="token punctuation">,</span> updateProgress<span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="load-äº‹ä»¶ã€error-äº‹ä»¶ã€abort-äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#load-äº‹ä»¶ã€error-äº‹ä»¶ã€abort-äº‹ä»¶" aria-hidden="true">#</a> load äº‹ä»¶ã€error äº‹ä»¶ã€abort äº‹ä»¶</h3><p>load äº‹ä»¶è¡¨ç¤ºæœåŠ¡å™¨ä¼ æ¥çš„æ•°æ®æ¥æ”¶å®Œæ¯•ï¼Œerror äº‹ä»¶è¡¨ç¤ºè¯·æ±‚å‡ºé”™ï¼Œabort äº‹ä»¶è¡¨ç¤ºè¯·æ±‚è¢«ä¸­æ–­ï¼ˆæ¯”å¦‚ç”¨æˆ·å–æ¶ˆè¯·æ±‚ï¼‰ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> transferComplete<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> transferFailed<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;abort&#39;</span><span class="token punctuation">,</span> transferCanceled<span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">transferComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ•°æ®æ¥æ”¶å®Œæ¯•&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">transferFailed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ•°æ®æ¥æ”¶å‡ºé”™&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">transferCanceled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ç”¨æˆ·å–æ¶ˆæ¥æ”¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="loadend-äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#loadend-äº‹ä»¶" aria-hidden="true">#</a> loadend äº‹ä»¶</h3><p><code>abort</code>ã€<code>load</code>å’Œ<code>error</code>è¿™ä¸‰ä¸ªäº‹ä»¶ï¼Œä¼šä¼´éšä¸€ä¸ª<code>loadend</code>äº‹ä»¶ï¼Œè¡¨ç¤ºè¯·æ±‚ç»“æŸï¼Œä½†ä¸çŸ¥é“å…¶æ˜¯å¦æˆåŠŸã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;loadend&#39;</span><span class="token punctuation">,</span> loadEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">loadEnd</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è¯·æ±‚ç»“æŸï¼ŒçŠ¶æ€æœªçŸ¥&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="timeout-äº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#timeout-äº‹ä»¶" aria-hidden="true">#</a> timeout äº‹ä»¶</h3><p>æœåŠ¡å™¨è¶…è¿‡æŒ‡å®šæ—¶é—´è¿˜æ²¡æœ‰è¿”å›ç»“æœï¼Œå°±ä¼šè§¦å‘ timeout äº‹ä»¶ï¼Œå…·ä½“çš„ä¾‹å­å‚è§<code>timeout</code>å±æ€§ä¸€èŠ‚ã€‚</p><h2 id="navigator-sendbeacon" tabindex="-1"><a class="header-anchor" href="#navigator-sendbeacon" aria-hidden="true">#</a> Navigator.sendBeacon()</h2><p>ç”¨æˆ·å¸è½½ç½‘é¡µçš„æ—¶å€™ï¼Œæœ‰æ—¶éœ€è¦å‘æœåŠ¡å™¨å‘ä¸€äº›æ•°æ®ã€‚å¾ˆè‡ªç„¶çš„åšæ³•æ˜¯åœ¨<code>unload</code>äº‹ä»¶æˆ–<code>beforeunload</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°é‡Œé¢ï¼Œä½¿ç”¨<code>XMLHttpRequest</code>å¯¹è±¡å‘é€æ•°æ®ã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšä¸æ˜¯å¾ˆå¯é ï¼Œå› ä¸º<code>XMLHttpRequest</code>å¯¹è±¡æ˜¯å¼‚æ­¥å‘é€ï¼Œå¾ˆå¯èƒ½åœ¨å®ƒå³å°†å‘é€çš„æ—¶å€™ï¼Œé¡µé¢å·²ç»å¸è½½äº†ï¼Œä»è€Œå¯¼è‡´å‘é€å–æ¶ˆæˆ–è€…å‘é€å¤±è´¥ã€‚</p><p>è§£å†³æ–¹æ³•å°±æ˜¯<code>unload</code>äº‹ä»¶é‡Œé¢ï¼ŒåŠ ä¸€äº›å¾ˆè€—æ—¶çš„åŒæ­¥æ“ä½œã€‚è¿™æ ·å°±èƒ½ç•™å‡ºè¶³å¤Ÿçš„æ—¶é—´ï¼Œä¿è¯å¼‚æ­¥ AJAX èƒ½å¤Ÿå‘é€æˆåŠŸã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/log&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;foo=bar&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;unload&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// a time-consuming operation</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> m <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> m <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> m<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">continue</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¼ºåˆ¶æ‰§è¡Œäº†ä¸€æ¬¡åŒé‡å¾ªç¯ï¼Œæ‹–é•¿äº†<code>unload</code>äº‹ä»¶çš„æ‰§è¡Œæ—¶é—´ï¼Œå¯¼è‡´å¼‚æ­¥ AJAX èƒ½å¤Ÿå‘é€æˆåŠŸã€‚</p><p>ç±»ä¼¼çš„è¿˜å¯ä»¥ä½¿ç”¨<code>setTimeout()</code>ã€‚ä¸‹é¢æ˜¯è¿½è¸ªç”¨æˆ·ç‚¹å‡»çš„ä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;a id=&quot;target&quot; href=&quot;https://baidu.com&quot;&gt;click&lt;/a&gt;</span>
<span class="token keyword">const</span> clickTime <span class="token operator">=</span> <span class="token number">350</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> theLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;target&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/log&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;foo=bar&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

theLink<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> theLink<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;href&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> clickTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä½¿ç”¨<code>setTimeout()</code>ï¼Œæ‹–å»¶äº†350æ¯«ç§’ï¼Œæ‰è®©é¡µé¢è·³è½¬ï¼Œå› æ­¤ä½¿å¾—å¼‚æ­¥ AJAX æœ‰æ—¶é—´å‘å‡ºã€‚</p><p>è¿™äº›åšæ³•çš„å…±åŒé—®é¢˜æ˜¯ï¼Œå¸è½½çš„æ—¶é—´è¢«ç¡¬ç”Ÿç”Ÿæ‹–é•¿äº†ï¼Œåé¢é¡µé¢çš„åŠ è½½è¢«æ¨è¿Ÿäº†ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæµè§ˆå™¨å¼•å…¥äº†<code>Navigator.sendBeacon()</code>æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•è¿˜æ˜¯å¼‚æ­¥å‘å‡ºè¯·æ±‚ï¼Œä½†æ˜¯è¯·æ±‚ä¸å½“å‰é¡µé¢çº¿ç¨‹è„±é’©ï¼Œä½œä¸ºæµè§ˆå™¨è¿›ç¨‹çš„ä»»åŠ¡ï¼Œå› æ­¤å¯ä»¥ä¿è¯ä¼šæŠŠæ•°æ®å‘å‡ºå»ï¼Œä¸æ‹–å»¶å¸è½½æµç¨‹ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;unload&#39;</span><span class="token punctuation">,</span> logData<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">logData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  navigator<span class="token punctuation">.</span><span class="token function">sendBeacon</span><span class="token punctuation">(</span><span class="token string">&#39;/log&#39;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">some</span><span class="token operator">:</span> <span class="token string">&quot;data&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Navigator.sendBeacon()</code>æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡æœåŠ¡å™¨çš„ URLï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰€è¦å‘é€çš„æ•°æ®ï¼ˆå¯é€‰ï¼‰ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€è¡¨å•å¯¹è±¡ã€äºŒè¿›åˆ¶å¯¹è±¡ç­‰ç­‰ï¼‰ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>navigator<span class="token punctuation">.</span><span class="token function">sendBeacon</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæˆåŠŸå‘é€æ•°æ®ä¸º<code>true</code>ï¼Œå¦åˆ™ä¸º<code>false</code>ã€‚</p><p>è¯¥æ–¹æ³•å‘é€æ•°æ®çš„ HTTP æ–¹æ³•æ˜¯ POSTï¼Œå¯ä»¥è·¨åŸŸï¼Œç±»ä¼¼äºè¡¨å•æäº¤æ•°æ®ã€‚å®ƒä¸èƒ½æŒ‡å®šå›è°ƒå‡½æ•°ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;body onload=&quot;analytics(&#39;start&#39;)&quot; onunload=&quot;analytics(&#39;end&#39;)&quot;&gt;</span>

<span class="token keyword">function</span> <span class="token function">analytics</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>navigator<span class="token punctuation">.</span>sendBeacon<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token string">&#39;http://example.com/analytics&#39;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token string">&#39;state=&#39;</span> <span class="token operator">+</span> state <span class="token operator">+</span> <span class="token string">&#39;&amp;location=&#39;</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
  navigator<span class="token punctuation">.</span><span class="token function">sendBeacon</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥æ–¹æ³•ä¸å…è®¸è‡ªå®šä¹‰ HTTP æ ‡å¤´ï¼Œä¸ºäº†ä»¥â€œapplication/jsonâ€çš„å½¢å¼å‘é€æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ Blob å¯¹è±¡ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">some</span><span class="token operator">:</span> <span class="token string">&quot;data&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;application/json; charset=UTF-8&#39;</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
navigator<span class="token punctuation">.</span><span class="token function">sendBeacon</span><span class="token punctuation">(</span><span class="token string">&#39;/log&#39;</span><span class="token punctuation">,</span> blob<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ–¹æ³•çš„ä¼˜å…ˆçº§è¾ƒä½ï¼Œä¸ä¼šå ç”¨é¡µé¢èµ„æºã€‚ä¸€èˆ¬æ˜¯åœ¨æµè§ˆå™¨ç©ºé—²çš„æ—¶å€™ï¼Œæ‰ä¼šå‘é€ã€‚</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 874530670@qq.com">sunzhenyang</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a aria-label="Cookie" class="vp-link nav-link prev nav-link prev" href="/technology/javascript/bom/cookie.html"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon iconfont icon-article" style=""></span>Cookie</div></a><a aria-label="åŒæºé™åˆ¶" class="vp-link nav-link next nav-link next" href="/technology/javascript/bom/same-origin.html"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">åŒæºé™åˆ¶<span class="font-icon icon iconfont icon-article" style=""></span></div></a></nav><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">ä»Šæ—¥äº‹ï¼Œä»Šæ—¥æ¯•ï¼</div><div class="vp-copyright">Copyright by é˜®ä¸€å³°</div></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-a7d5173b.js" defer></script>
  </body>
</html>
